function _0x4cb1(_0x43936b,_0x31d1cf){const _0x50dbca=_0x50db();return _0x4cb1=function(_0x4cb174,_0x360401){_0x4cb174=_0x4cb174-0x19a;let _0x2d613b=_0x50dbca[_0x4cb174];return _0x2d613b;},_0x4cb1(_0x43936b,_0x31d1cf);}const _0x69c3f3=_0x4cb1;(function(_0x4fe0f9,_0x3bf676){const _0x142cb6=_0x4cb1,_0x2b4cd2=_0x4fe0f9();while(!![]){try{const _0x40bfcf=-parseInt(_0x142cb6(0x1a4))/0x1+-parseInt(_0x142cb6(0x215))/0x2*(parseInt(_0x142cb6(0x207))/0x3)+-parseInt(_0x142cb6(0x1b2))/0x4*(-parseInt(_0x142cb6(0x1ab))/0x5)+-parseInt(_0x142cb6(0x233))/0x6+-parseInt(_0x142cb6(0x23b))/0x7+-parseInt(_0x142cb6(0x24f))/0x8*(-parseInt(_0x142cb6(0x1be))/0x9)+-parseInt(_0x142cb6(0x21f))/0xa*(-parseInt(_0x142cb6(0x206))/0xb);if(_0x40bfcf===_0x3bf676)break;else _0x2b4cd2['push'](_0x2b4cd2['shift']());}catch(_0x3ca0b1){_0x2b4cd2['push'](_0x2b4cd2['shift']());}}}(_0x50db,0xc2199));const T={'en':{'title':_0x69c3f3(0x235),'hint':_0x69c3f3(0x19b),'upload':'Upload','check':'Check','clear':'Clear','reset':_0x69c3f3(0x1d1),'results':_0x69c3f3(0x1aa),'items':[[_0x69c3f3(0x244),_0x69c3f3(0x1b8)],['File\x20size\x20≤\x20240\x20KB',_0x69c3f3(0x24e)],[_0x69c3f3(0x1c6),_0x69c3f3(0x1e9)],[_0x69c3f3(0x1e2),_0x69c3f3(0x1f5)],[_0x69c3f3(0x1b0),_0x69c3f3(0x1ec)],['photo\x20date\x20≤6\x20months\x20old',_0x69c3f3(0x226)],['Color\x20depth\x2024-bit','color'],[_0x69c3f3(0x201),_0x69c3f3(0x202)],['Eye\x20level\x2056%–69%',_0x69c3f3(0x20c)],[_0x69c3f3(0x1a7),_0x69c3f3(0x1fd)],[_0x69c3f3(0x1db),_0x69c3f3(0x1f2)],[_0x69c3f3(0x1b9),'contrast'],[_0x69c3f3(0x21c),_0x69c3f3(0x254)],[_0x69c3f3(0x21a),'background'],[_0x69c3f3(0x19f),_0x69c3f3(0x249)]]},'ar':{'title':_0x69c3f3(0x23e),'hint':'اسحب\x20الخط\x20الأصفر\x20(أعلى\x20الرأس/الذقن)\x20أو\x20الأزرق\x20(العين).\x20ثم\x20اضغط\x20فحص.','upload':_0x69c3f3(0x1a8),'check':_0x69c3f3(0x212),'clear':'مسح','reset':_0x69c3f3(0x234),'results':_0x69c3f3(0x242),'items':[['الأبعاد\x20يجب\x20أن\x20تكون\x20600×600\x20بكسل','dim'],[_0x69c3f3(0x1da),'size'],[_0x69c3f3(0x1f8),'format'],[_0x69c3f3(0x1af),_0x69c3f3(0x1f5)],[_0x69c3f3(0x1c4),'exif'],[_0x69c3f3(0x1bc),_0x69c3f3(0x226)],['عمق\x20الألوان\x2024\x20بت',_0x69c3f3(0x230)],[_0x69c3f3(0x1fe),_0x69c3f3(0x202)],[_0x69c3f3(0x19e),_0x69c3f3(0x20c)],[_0x69c3f3(0x1dd),'center'],[_0x69c3f3(0x240),'tilt'],['التباين\x20جيد',_0x69c3f3(0x1ff)],[_0x69c3f3(0x24b),_0x69c3f3(0x254)],[_0x69c3f3(0x210),_0x69c3f3(0x232)],['لم\x20يتم\x20التعديل\x20باستخدام\x20برامج\x20تحرير',_0x69c3f3(0x249)]]}};let lang='en',themeDark=!0x1;const canvas=document[_0x69c3f3(0x248)]('canvas'),ctx=canvas[_0x69c3f3(0x1b7)]('2d'),uploadInput=document[_0x69c3f3(0x248)](_0x69c3f3(0x1d5)),uploadBtn=document[_0x69c3f3(0x248)](_0x69c3f3(0x1cb)),checkBtn=document['getElementById'](_0x69c3f3(0x1a5)),clearBtn=document['getElementById'](_0x69c3f3(0x239)),resetLinesBtn=document[_0x69c3f3(0x248)](_0x69c3f3(0x1ca)),langBtn=document['getElementById'](_0x69c3f3(0x205)),themeBtn=document[_0x69c3f3(0x248)](_0x69c3f3(0x1e6)),checksList=document[_0x69c3f3(0x248)](_0x69c3f3(0x1a9)),hintEl=document[_0x69c3f3(0x248)](_0x69c3f3(0x24a)),titleEl=document['getElementById']('title'),uploadLabel=document['getElementById'](_0x69c3f3(0x1ed))||uploadBtn[_0x69c3f3(0x1d4)](_0x69c3f3(0x1d7)),checkLabel=document[_0x69c3f3(0x248)](_0x69c3f3(0x1a0))||checkBtn[_0x69c3f3(0x1d4)](_0x69c3f3(0x1d7)),clearLabel=document[_0x69c3f3(0x248)]('clearLabel')||clearBtn[_0x69c3f3(0x1d4)]('span'),resultsTitle=document[_0x69c3f3(0x248)](_0x69c3f3(0x1b5));let uploadedFile=null,originalImage=null,exifData=null,lastDetection=null;const CANVAS_SIZE=0x258;let headTopY=0x8c,chinY=0x1cc,eyeY=0x12c,draggingLine=null;function buildChecks(){const _0x4deaf1=_0x69c3f3;checksList[_0x4deaf1(0x236)]='';const _0x116f0a=T[lang][_0x4deaf1(0x222)];for(let _0x2d1ea0=0x0;_0x2d1ea0<_0x116f0a[_0x4deaf1(0x1f6)];_0x2d1ea0++){const [_0x190c4f,_0x436181]=_0x116f0a[_0x2d1ea0],_0x4ade74=document['createElement'](_0x4deaf1(0x208));_0x4ade74[_0x4deaf1(0x22c)]='checkItem\x20card',_0x4ade74[_0x4deaf1(0x236)]=_0x4deaf1(0x1cd)+_0x190c4f+_0x4deaf1(0x1ce)+_0x436181+_0x4deaf1(0x1f1),checksList[_0x4deaf1(0x1c0)](_0x4ade74);}}function applyLang(){const _0x38bf32=_0x69c3f3,_0x23e7d0=T[lang];titleEl[_0x38bf32(0x1df)]=_0x23e7d0[_0x38bf32(0x22f)],hintEl[_0x38bf32(0x1df)]=_0x23e7d0[_0x38bf32(0x24a)],uploadBtn[_0x38bf32(0x236)]=_0x38bf32(0x1fb)+_0x23e7d0[_0x38bf32(0x1d5)]+_0x38bf32(0x250),checkBtn[_0x38bf32(0x236)]=_0x38bf32(0x1a1)+_0x23e7d0[_0x38bf32(0x1b6)]+_0x38bf32(0x250),clearBtn['innerHTML']='🗑️\x20<span\x20id=\x22clearLabel\x22>'+_0x23e7d0[_0x38bf32(0x213)]+_0x38bf32(0x250),resetLinesBtn[_0x38bf32(0x1df)]=_0x23e7d0[_0x38bf32(0x246)],resultsTitle['innerText']=_0x23e7d0[_0x38bf32(0x245)],langBtn['innerText']='en'===lang?'AR':'EN',buildChecks();}function applyTheme(){const _0x2fca24=_0x69c3f3;document[_0x2fca24(0x1d9)][_0x2fca24(0x218)][_0x2fca24(0x238)]('dark',themeDark),themeBtn[_0x2fca24(0x1df)]=themeDark?'☀️':'🌙';}function clamp(_0x2db66a,_0x52fd1a,_0x537df4){const _0x3ba5d9=_0x69c3f3;return Math[_0x3ba5d9(0x1cf)](_0x52fd1a,Math[_0x3ba5d9(0x24d)](_0x537df4,_0x2db66a));}function fmtPercent(_0x4e19e9){const _0x5613e1=_0x69c3f3;return(Math['round'](0xa*_0x4e19e9)/0xa)[_0x5613e1(0x1cc)](0x1)+'%';}function clientToCanvasY(_0xb08f93){const _0x48969f=_0x69c3f3,_0x28e069=canvas[_0x48969f(0x22e)](),_0x578716=CANVAS_SIZE/_0x28e069[_0x48969f(0x20a)];return clamp((_0xb08f93-_0x28e069[_0x48969f(0x223)])*_0x578716,0x0,CANVAS_SIZE);}function clearCanvas(){const _0x4cdca2=_0x69c3f3;ctx[_0x4cdca2(0x253)](0x0,0x0,CANVAS_SIZE,CANVAS_SIZE);}function drawImageScaled(){const _0x5bb2b0=_0x69c3f3;originalImage&&ctx[_0x5bb2b0(0x1ef)](originalImage,0x0,0x0,CANVAS_SIZE,CANVAS_SIZE);}function drawCenterGuides(){const _0x20db2f=_0x69c3f3;ctx[_0x20db2f(0x1ad)](),ctx['strokeStyle']=_0x20db2f(0x1d0),ctx[_0x20db2f(0x1ee)]([0x6,0x6]),ctx[_0x20db2f(0x21d)]=0x1,ctx[_0x20db2f(0x1bb)](),ctx['moveTo'](CANVAS_SIZE/0x2,0x0),ctx[_0x20db2f(0x1b3)](CANVAS_SIZE/0x2,CANVAS_SIZE),ctx[_0x20db2f(0x1ea)](0x0,CANVAS_SIZE/0x2),ctx[_0x20db2f(0x1b3)](CANVAS_SIZE,CANVAS_SIZE/0x2),ctx[_0x20db2f(0x1c1)](),ctx[_0x20db2f(0x1f4)]();}function drawLinesAndLabels(){const _0x4c4ff7=_0x69c3f3;ctx['save'](),ctx[_0x4c4ff7(0x21d)]=0x2,ctx['font']='14px\x20Cairo,\x20Arial',ctx[_0x4c4ff7(0x227)]=_0x4c4ff7(0x1e5),ctx['beginPath'](),ctx[_0x4c4ff7(0x1ea)](0x0,headTopY),ctx[_0x4c4ff7(0x1b3)](CANVAS_SIZE,headTopY),ctx['stroke'](),drawLabel(0x8,headTopY-0x6,_0x4c4ff7(0x1d3)+fmtPercent(0x64*(0x1-headTopY/CANVAS_SIZE))),ctx[_0x4c4ff7(0x1bb)](),ctx[_0x4c4ff7(0x1ea)](0x0,chinY),ctx[_0x4c4ff7(0x1b3)](CANVAS_SIZE,chinY),ctx[_0x4c4ff7(0x1c1)](),drawLabel(0x8,chinY-0x6,_0x4c4ff7(0x243)+fmtPercent(0x64*(0x1-chinY/CANVAS_SIZE))),ctx[_0x4c4ff7(0x227)]='#06b6d4',ctx[_0x4c4ff7(0x1bb)](),ctx[_0x4c4ff7(0x1ea)](0x0,eyeY),ctx[_0x4c4ff7(0x1b3)](CANVAS_SIZE,eyeY),ctx[_0x4c4ff7(0x1c1)](),drawLabel(0x8,eyeY-0x6,_0x4c4ff7(0x19a)+fmtPercent(0x64*(0x1-eyeY/CANVAS_SIZE))),ctx['restore']();}function drawLabel(_0x2416bc,_0x352ab2,_0x3abc63){const _0x5830ad=_0x69c3f3;ctx['save'](),ctx[_0x5830ad(0x217)]=_0x5830ad(0x1eb);const _0x2c5c9e=ctx['measureText'](_0x3abc63)['width']+0xc;ctx['fillStyle']=_0x5830ad(0x247),ctx[_0x5830ad(0x1e8)](_0x2416bc,_0x352ab2-0x12+0x6,_0x2c5c9e,0x12),ctx[_0x5830ad(0x1e3)]=_0x5830ad(0x224),ctx['textAlign']='left',ctx['fillText'](_0x3abc63,_0x2416bc+0x6,_0x352ab2-0x9+0x8),ctx['restore']();}function redraw(){clearCanvas(),originalImage&&drawImageScaled(),drawCenterGuides(),drawLinesAndLabels();}async function handleUpload(_0xb9085a){const _0x2d3b97=_0x69c3f3,_0x12b801=_0xb9085a[_0x2d3b97(0x1d2)][_0x2d3b97(0x1c2)][0x0];if(!_0x12b801)return;uploadedFile=_0x12b801;const _0xfe5aea=new FileReader();_0xfe5aea[_0x2d3b97(0x1e4)]=async()=>{const _0x7cc729=_0x2d3b97,_0x1c2efd=new Image();_0x1c2efd['onload']=async()=>{const _0x265d85=_0x4cb1;originalImage=_0x1c2efd,canvas['width']=CANVAS_SIZE,canvas[_0x265d85(0x20a)]=CANVAS_SIZE,clearCanvas(),drawImageScaled();try{exifData=null,EXIF[_0x265d85(0x203)](_0x1c2efd,function(){const _0x17e3be=_0x265d85;exifData=EXIF[_0x17e3be(0x21b)](this)||null;});}catch(_0x5212a2){exifData=null;}try{lastDetection=await faceapi[_0x265d85(0x1b4)](canvas,new faceapi[(_0x265d85(0x1ac))]())[_0x265d85(0x225)]();}catch(_0x2a3e64){lastDetection=null;}if(lastDetection){const _0x514782=lastDetection[_0x265d85(0x216)][_0x265d85(0x1fc)],_0x54367b=lastDetection[_0x265d85(0x1c7)],_0x5dfda8=_0x54367b[_0x265d85(0x1fa)](),_0x3ad2e4=_0x54367b[_0x265d85(0x22d)](),_0x1f33c6=_0x54367b[_0x265d85(0x22a)]();headTopY=clamp(_0x514782['y']-Math[_0x265d85(0x1cf)](0x8,0.06*_0x514782[_0x265d85(0x20a)]),0x6,CANVAS_SIZE-0x6),chinY=clamp(_0x5dfda8[Math['floor'](_0x5dfda8['length']/0x2)]['y'],0x6,CANVAS_SIZE-0x6);const _0x2e7693=_0x3ad2e4[_0x265d85(0x1bf)]((_0x5e751e,_0x543f07)=>_0x5e751e+_0x543f07['y'],0x0)/_0x3ad2e4[_0x265d85(0x1f6)],_0x501a80=_0x1f33c6[_0x265d85(0x1bf)]((_0x171754,_0x2aa9d4)=>_0x171754+_0x2aa9d4['y'],0x0)/_0x1f33c6[_0x265d85(0x1f6)];eyeY=clamp((_0x2e7693+_0x501a80)/0x2,0x6,CANVAS_SIZE-0x6);}else headTopY=0x8c,chinY=0x1cc,eyeY=0x12c;buildChecks(),redraw();},_0x1c2efd[_0x7cc729(0x228)]=_0xfe5aea[_0x7cc729(0x23a)];},_0xfe5aea['readAsDataURL'](_0x12b801);}function getClientY(_0x331a2e){const _0x377e51=_0x69c3f3;return _0x331a2e['touches']?_0x331a2e['touches'][0x0]['clientY']:_0x331a2e[_0x377e51(0x20b)];}function startDrag(_0x2a9d7f){const _0xfa68e6=_0x69c3f3,_0x4f5dfa=Math['abs'](_0x2a9d7f-headTopY),_0x2b6ae6=Math[_0xfa68e6(0x1d6)](_0x2a9d7f-chinY),_0xb2fa25=Math[_0xfa68e6(0x1d6)](_0x2a9d7f-eyeY),_0x273e85=Math[_0xfa68e6(0x24d)](_0x4f5dfa,_0x2b6ae6,_0xb2fa25);draggingLine=_0x273e85>0x14?null:_0x273e85===_0x4f5dfa?_0xfa68e6(0x1a3):_0x273e85===_0x2b6ae6?_0xfa68e6(0x23d):_0xfa68e6(0x219);}function moveDrag(_0xd69cd0){const _0x3aed14=_0x69c3f3;draggingLine&&(_0x3aed14(0x1a3)===draggingLine?headTopY=clamp(_0xd69cd0,0x6,chinY-0x8):_0x3aed14(0x23d)===draggingLine?chinY=clamp(_0xd69cd0,headTopY+0x8,CANVAS_SIZE-0x6):eyeY=clamp(_0xd69cd0,0x6,CANVAS_SIZE-0x6),redraw());}function stopDrag(){draggingLine=null;}function setCheckResult(_0x6d33a4,_0x41f6f9,_0xbe4a19){const _0x206565=_0x69c3f3,_0x21559d=document[_0x206565(0x248)](_0x6d33a4+'-res');_0x21559d&&(_0x21559d['className']='result\x20'+_0x41f6f9,_0x21559d[_0x206565(0x1df)]=(_0x206565(0x1c5)===_0x41f6f9?'✅\x20':_0x206565(0x1c8)===_0x41f6f9?'❌\x20':'⏳\x20')+(_0xbe4a19||''));}function checkColorDepth(){const _0x137d52=_0x69c3f3;if(!originalImage)return _0x137d52(0x1c8);const _0x1dd298=document[_0x137d52(0x1ba)](_0x137d52(0x237));_0x1dd298['width']=originalImage['naturalWidth']||CANVAS_SIZE,_0x1dd298['height']=originalImage[_0x137d52(0x1bd)]||CANVAS_SIZE;const _0x16ce7e=_0x1dd298[_0x137d52(0x1b7)]('2d');_0x16ce7e[_0x137d52(0x1ef)](originalImage,0x0,0x0,_0x1dd298['width'],_0x1dd298[_0x137d52(0x20a)]);const _0x42e9a1=_0x16ce7e[_0x137d52(0x1a2)](0x0,0x0,_0x1dd298[_0x137d52(0x1e7)],_0x1dd298[_0x137d52(0x20a)])[_0x137d52(0x20f)];for(let _0x5b75f2=0x0;_0x5b75f2<_0x42e9a1[_0x137d52(0x1f6)];_0x5b75f2+=0x4)if(0xff!==_0x42e9a1[_0x5b75f2+0x3])return _0x137d52(0x1c8);return _0x137d52(0x1c5);}function _0x50db(){const _0x3070db=['حجم\x20الملف\x20اقل\x20من\x20240\x20كيلوبايت','Head\x20tilt\x20≤5°','Software','الوجه\x20في\x20المركز\x20±5%','then','innerText','touchstart','faceLandmark68Net','Filename\x20valid\x20(letters/numbers/_\x20.\x20-)','fillStyle','onload','#facc15','themeBtn','width','fillRect','format','moveTo','13px\x20Cairo,\x20Arial','exif','uploadLabel','setLineDash','drawImage','mousemove','-res\x22>⏳</div>','tilt','mousedown','restore','filename','length','Auto-detect\x20failed','الصيغة\x20JPG\x20فقط','replace','getJawOutline','📁\x20<span\x20id=\x22uploadLabel\x22>','box','center','ارتفاع\x20الرأس\x20(من\x20الذقن\x20إلى\x20أعلى)\x2050%–69%','contrast','tinyFaceDetector','Head\x20height\x20(chin→top)\x2050%–69%','head','getData','\x20KB','langBtn','66SMrDLG','220086jSJpkL','div','all','height','clientY','eyes','getMonth','loadFromUri','data','الخلفية\x20فاتحة\x20وموحدة','GPS/Orientation\x20present','فحص','clear','addEventListener','6qMxgDz','detection','font','classList','eye','Background\x20uniform\x20&\x20light','getAllTags','No\x20strong\x20shadows','lineWidth','GPSLongitude','3379570hLclAo','name','mouseup','items','top','white','withFaceLandmarks','date','strokeStyle','src','click','getRightEye','face-api\x20models\x20loaded','className','getLeftEye','getBoundingClientRect','title','color','DateTimeOriginal','background','6194136utiOvV','إعادة\x20تعيين\x20الخطوط','DV\x20Photo\x20Checker','innerHTML','canvas','toggle','clearBtn','result','3832094UUMFLv','forEach','chin','مدقق\x20صورة\x20القرعة\x20(DV)','preventDefault','ميلان\x20الرأس\x20≤5°','GPSLatitude','النتائج','chin\x20','Dimensions\x20must\x20be\x20600×600\x20px','results','reset','rgba(0,0,0,0.55)','getElementById','edited','hint','لا\x20ظلال\x20قوية','atan','min','size','3376KdIyTy','</span>','touchend','Orientation','clearRect','shadow','eyes\x20','Drag\x20yellow\x20lines\x20(top/chin)\x20or\x20blue\x20line\x20(eyes).\x20Tap\x20Check.','mouseleave','Not\x20JPG','مستوى\x20العينين\x2056%–69%','No\x20software\x20editing\x20detected','checkLabel','🔍\x20<span\x20id=\x22checkLabel\x22>','getImageData','headTop','1546926ZokcUy','checkBtn','24-bit','Face\x20centered\x20±5%','تحميل','checksList','Results','465Idcwco','TinyFaceDetectorOptions','save','nets','اسم\x20الملف\x20صالح\x20(أحرف/أرقام/_\x20.\x20-)','photo:\x20no\x20GPS/Orientation','models','32684eMHFuw','lineTo','detectSingleFace','resultsTitle','check','getContext','dim','Contrast\x20ok','createElement','beginPath','تاريخ\x20الصورة\x20يجب\x20ان\x20لا\x20يتعدى\x206\x20اشهر','naturalHeight','28881zjPSEj','reduce','appendChild','stroke','files','naturalWidth','بيانات\x20الصورة\x20الحساسة\x20GPS/Orientation','pass','Format:\x20JPG\x20only','landmarks','fail','test','resetLines','uploadBtn','toFixed','<div\x20class=\x22label\x22>','</div><div\x20class=\x22result\x20pending\x22\x20id=\x22','max','rgba(150,150,150,0.6)','Reset\x20Lines','target','top\x20','querySelector','upload','abs','span','Please\x20upload\x20an\x20image\x20first','body'];_0x50db=function(){return _0x3070db;};return _0x50db();}function checkExifDate(){const _0x467d0c=_0x69c3f3;if(!exifData||!exifData[_0x467d0c(0x231)])return'fail';const _0x928294=exifData['DateTimeOriginal'][_0x467d0c(0x1f9)](/:/g,'-')[_0x467d0c(0x1f9)]('\x20','T'),_0x13be4d=new Date(_0x928294),_0x174338=new Date();return 0xc*(_0x174338['getFullYear']()-_0x13be4d['getFullYear']())+(_0x174338[_0x467d0c(0x20d)]()-_0x13be4d['getMonth']())<=0x6?_0x467d0c(0x1c5):_0x467d0c(0x1c8);}function checkEdited(){const _0x96267=_0x69c3f3;if(!exifData)return'fail';const _0x52b320=exifData[_0x96267(0x1dc)]||'';return/Photoshop|GIMP|Lightroom|Paint/i['test'](_0x52b320)?_0x96267(0x1c8):_0x96267(0x1c5);}buildChecks(),applyLang(),applyTheme(),langBtn[_0x69c3f3(0x214)](_0x69c3f3(0x229),()=>{lang='en'===lang?'ar':'en',applyLang();}),themeBtn[_0x69c3f3(0x214)](_0x69c3f3(0x229),()=>{themeDark=!themeDark,applyTheme();}),uploadBtn[_0x69c3f3(0x214)](_0x69c3f3(0x229),()=>uploadInput[_0x69c3f3(0x229)]()),uploadInput[_0x69c3f3(0x214)]('change',handleUpload),canvas[_0x69c3f3(0x214)](_0x69c3f3(0x1f3),_0x4b3a5f=>startDrag(clientToCanvasY(getClientY(_0x4b3a5f)))),canvas['addEventListener'](_0x69c3f3(0x1f0),_0x591d4a=>moveDrag(clientToCanvasY(getClientY(_0x591d4a)))),canvas[_0x69c3f3(0x214)](_0x69c3f3(0x221),stopDrag),canvas['addEventListener'](_0x69c3f3(0x19c),stopDrag),canvas[_0x69c3f3(0x214)](_0x69c3f3(0x1e0),_0x44b15f=>startDrag(clientToCanvasY(getClientY(_0x44b15f))),{'passive':!0x1}),canvas[_0x69c3f3(0x214)]('touchmove',_0xc3d99=>{const _0x459c52=_0x69c3f3;_0xc3d99[_0x459c52(0x23f)](),moveDrag(clientToCanvasY(getClientY(_0xc3d99)));},{'passive':!0x1}),canvas[_0x69c3f3(0x214)](_0x69c3f3(0x251),stopDrag),resetLinesBtn['addEventListener']('click',()=>{headTopY=0x8c,chinY=0x1cc,eyeY=0x12c,redraw();}),clearBtn[_0x69c3f3(0x214)]('click',()=>{uploadedFile=null,originalImage=null,exifData=null,lastDetection=null,clearCanvas(),buildChecks();}),Promise[_0x69c3f3(0x209)]([faceapi['nets'][_0x69c3f3(0x200)]['loadFromUri'](_0x69c3f3(0x1b1)),faceapi[_0x69c3f3(0x1ae)][_0x69c3f3(0x1e1)][_0x69c3f3(0x20e)](_0x69c3f3(0x1b1))])[_0x69c3f3(0x1de)](()=>console['log'](_0x69c3f3(0x22b))),checkBtn[_0x69c3f3(0x214)]('click',async()=>{const _0x37f796=_0x69c3f3;if(!uploadedFile)return alert('en'===lang?_0x37f796(0x1d8):'الرجاء\x20تحميل\x20صورة\x20أولا');try{lastDetection=await faceapi[_0x37f796(0x1b4)](canvas,new faceapi['TinyFaceDetectorOptions']())[_0x37f796(0x225)]();}catch(_0x2a6f94){lastDetection=null;}const _0x3ef4e8=originalImage?.[_0x37f796(0x1c3)]||null,_0xbc4a3e=originalImage?.[_0x37f796(0x1bd)]||null;setCheckResult(_0x37f796(0x1b8),0x258===_0x3ef4e8&&0x258===_0xbc4a3e?_0x37f796(0x1c5):_0x37f796(0x1c8),_0x3ef4e8?_0x3ef4e8+'×'+_0xbc4a3e:''),setCheckResult(_0x37f796(0x24e),uploadedFile[_0x37f796(0x24e)]<=0x3c000?_0x37f796(0x1c5):_0x37f796(0x1c8),Math['round'](uploadedFile[_0x37f796(0x24e)]/0x400)+_0x37f796(0x204));const _0x23b835='image/jpeg'===uploadedFile['type']||/.jpe?g$/i[_0x37f796(0x1c9)](uploadedFile[_0x37f796(0x220)]);setCheckResult(_0x37f796(0x1e9),_0x23b835?_0x37f796(0x1c5):'fail',_0x23b835?'JPG':_0x37f796(0x19d)),setCheckResult(_0x37f796(0x1f5),/^[a-zA-Z0-9_.-]+$/['test'](uploadedFile['name'])?_0x37f796(0x1c5):_0x37f796(0x1c8),uploadedFile[_0x37f796(0x220)]);const _0x1af0e2=exifData&&(exifData[_0x37f796(0x241)]||exifData[_0x37f796(0x21e)]||exifData[_0x37f796(0x252)]);setCheckResult('exif',_0x1af0e2?_0x37f796(0x1c8):_0x37f796(0x1c5),_0x1af0e2?_0x37f796(0x211):'OK'),setCheckResult('date',checkExifDate(),exifData?.[_0x37f796(0x231)]||''),setCheckResult(_0x37f796(0x230),checkColorDepth(),_0x37f796(0x1c5)===checkColorDepth()?_0x37f796(0x1a6):'with\x20alpha');const _0x22fb53=(chinY-headTopY)/CANVAS_SIZE*0x64;setCheckResult(_0x37f796(0x202),_0x22fb53>=0x32&&_0x22fb53<=0x45?_0x37f796(0x1c5):_0x37f796(0x1c8),fmtPercent(_0x22fb53));const _0x1eeaf8=0x64*(0x1-eyeY/CANVAS_SIZE);if(setCheckResult(_0x37f796(0x20c),_0x1eeaf8>=0x38&&_0x1eeaf8<=0x45?_0x37f796(0x1c5):_0x37f796(0x1c8),fmtPercent(_0x1eeaf8)),lastDetection){const _0x339642=lastDetection[_0x37f796(0x216)][_0x37f796(0x1fc)],_0x352961=lastDetection[_0x37f796(0x1c7)],_0xa9bbf1=_0x352961[_0x37f796(0x22d)](),_0x2fca5b=_0x352961[_0x37f796(0x22a)](),_0x4cbd3f=_0x339642['x']+_0x339642[_0x37f796(0x1e7)]/0x2,_0x4d3879=Math['abs'](_0x4cbd3f-CANVAS_SIZE/0x2)/CANVAS_SIZE*0x64;setCheckResult('center',_0x4d3879<=0x5?_0x37f796(0x1c5):_0x37f796(0x1c8),fmtPercent(_0x4d3879));const _0x4d2ce6=_0xa9bbf1[_0x37f796(0x1bf)]((_0x25181a,_0x4f0349)=>({'x':_0x25181a['x']+_0x4f0349['x'],'y':_0x25181a['y']+_0x4f0349['y']}),{'x':0x0,'y':0x0});_0x4d2ce6['x']/=_0xa9bbf1[_0x37f796(0x1f6)],_0x4d2ce6['y']/=_0xa9bbf1[_0x37f796(0x1f6)];const _0x4b4587=_0x2fca5b[_0x37f796(0x1bf)]((_0x380e4b,_0x3edd36)=>({'x':_0x380e4b['x']+_0x3edd36['x'],'y':_0x380e4b['y']+_0x3edd36['y']}),{'x':0x0,'y':0x0});_0x4b4587['x']/=_0x2fca5b['length'],_0x4b4587['y']/=_0x2fca5b[_0x37f796(0x1f6)];const _0xd788e3=(_0x4b4587['y']-_0x4d2ce6['y'])/(_0x4b4587['x']-_0x4d2ce6['x']||0.0001),_0x4487d2=0xb4*Math[_0x37f796(0x24c)](_0xd788e3)/Math['PI'];setCheckResult('tilt',Math[_0x37f796(0x1d6)](_0x4487d2)<=0x5?_0x37f796(0x1c5):_0x37f796(0x1c8),Math[_0x37f796(0x1d6)](_0x4487d2)[_0x37f796(0x1cc)](0x1)+'°');}else setCheckResult(_0x37f796(0x1fd),'fail',_0x37f796(0x1f7)),setCheckResult(_0x37f796(0x1f2),_0x37f796(0x1c8),'Auto-detect\x20failed');const _0x2246f1=ctx[_0x37f796(0x1a2)](0x0,0x0,CANVAS_SIZE,CANVAS_SIZE)[_0x37f796(0x20f)];let _0x1c5a8e=0xff,_0x148a76=0x0;for(let _0x209d05=0x0;_0x209d05<_0x2246f1[_0x37f796(0x1f6)];_0x209d05+=0x4){const _0xdd06b5=0.299*_0x2246f1[_0x209d05]+0.587*_0x2246f1[_0x209d05+0x1]+0.114*_0x2246f1[_0x209d05+0x2];_0xdd06b5<_0x1c5a8e&&(_0x1c5a8e=_0xdd06b5),_0xdd06b5>_0x148a76&&(_0x148a76=_0xdd06b5);}const _0x426191=(_0x148a76-_0x1c5a8e)/0xff*0x64;setCheckResult(_0x37f796(0x1ff),_0x426191>0x28?_0x37f796(0x1c5):_0x37f796(0x1c8),_0x426191['toFixed'](0x1)+'%');let _0x3b0043=!0x1;for(let _0x504262=0x0;_0x504262<_0x2246f1[_0x37f796(0x1f6)];_0x504262+=0x4){if(0.299*_0x2246f1[_0x504262]+0.587*_0x2246f1[_0x504262+0x1]+0.114*_0x2246f1[_0x504262+0x2]<0x1e){_0x3b0043=!0x0;break;}}setCheckResult(_0x37f796(0x254),_0x3b0043?_0x37f796(0x1c8):'pass');let _0x5d3427=!0x1;[[0x0,0x0],[CANVAS_SIZE-0x1,0x0],[0x0,CANVAS_SIZE-0x1],[CANVAS_SIZE-0x1,CANVAS_SIZE-0x1]][_0x37f796(0x23c)](([_0x4ea4f6,_0x3b8fd3])=>{const _0x35bed4=0x4*(_0x3b8fd3*CANVAS_SIZE+_0x4ea4f6);(_0x2246f1[_0x35bed4]+_0x2246f1[_0x35bed4+0x1]+_0x2246f1[_0x35bed4+0x2])/0x3<0xb4&&(_0x5d3427=!0x0);}),setCheckResult(_0x37f796(0x232),_0x5d3427?'fail':_0x37f796(0x1c5)),setCheckResult(_0x37f796(0x249),checkEdited(),exifData?.[_0x37f796(0x1dc)]||'');}),redraw();
